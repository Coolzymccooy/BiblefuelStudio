import{c as je,h as Qe,r as t,j as e,B as n,V as Ze,b as m,z as c}from"./index-2zSl8dPB.js";import{C as P}from"./Card-BZBWq0kh.js";import{I as U}from"./Input-BZbQ3akf.js";import{T as Xe}from"./Textarea-BU0aJD2H.js";import{S as j}from"./Select-cWS8Fylg.js";import{l as x,s as f,t as D,S as o}from"./storage-DAnXyH0z.js";import{L as Y}from"./library-Bs23YTBu.js";import{P as es}from"./play-CBGZ8sX5.js";import{C as H}from"./circle-check-DmWaP-AU.js";const ss=[["path",{d:"M2 10v3",key:"1fnikh"}],["path",{d:"M6 6v11",key:"11sgs0"}],["path",{d:"M10 3v18",key:"yhl04a"}],["path",{d:"M14 8v7",key:"3a1oy3"}],["path",{d:"M18 5v13",key:"123xd1"}],["path",{d:"M22 10v3",key:"154ddg"}]],ts=je("audio-lines",ss);const as=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],ye=je("clipboard-list",as);function xs(){const{config:ke}=Qe(),W=ke.features.render,[k,O]=t.useState(""),[w,$]=t.useState(""),[b,I]=t.useState(""),[G,K]=t.useState(!1),[u,q]=t.useState(!1),[h,we]=t.useState(null),[Ne,E]=t.useState(!1),[Q,Se]=t.useState([]),[Ce,Z]=t.useState(!1),[Pe,A]=t.useState(!1),[X,Me]=t.useState([]),[Le,ee]=t.useState(!1),[p,se]=t.useState(null),[Ie,B]=t.useState(!1),[R,Ee]=t.useState([]),[te,Ae]=t.useState([]),[v,ae]=t.useState("portrait"),[N,re]=t.useState(90),[M,F]=t.useState(""),[S,ie]=t.useState(.3),[L,le]=t.useState(!0),[C,oe]=t.useState(20),[g,Be]=t.useState("webhook"),[ce,Re]=t.useState("private"),[ze,Te]=t.useState([]),[ne,de]=t.useState(""),[Ve,Ue]=t.useState([]),[ue,he]=t.useState(""),[_,De]=t.useState([]),[z,T]=t.useState(""),V=s=>D(s,m.baseUrl),xe=s=>/\.(mp4|mov|webm|m4v)(\?|#|$)/i.test(String(s||"")),pe=s=>{const a=String(s||"").replace(/\\/g,"/").trim();if(!a||a.startsWith("http://")||a.startsWith("https://"))return"";const l=(a.split("/").pop()||"").replace(/\.[^.]+$/,"");return l?V(`/outputs/${l}.jpg`):""},me=s=>V(s?.image)||pe(s?.previewUrl||s?.url)||"",fe=(s,a)=>{const i=pe(a?.previewUrl||a?.url),l=s.currentTarget;if(!(l.dataset.fallbackApplied==="1")&&i&&l.src!==i){l.dataset.fallbackApplied="1",l.src=i;return}l.style.display="none"};t.useEffect(()=>{const s=x(o.scripts,[]);s.length&&Ee(s);const a=x(o.audioPath,"");a&&$(a);const i=x(o.audioHistory,[]);i.length&&Ae(i);const l=x(o.renderLines,"");l&&I(l);const r=x(o.renderBackgroundPath,"");r&&O(r);const d=x(o.renderInBackground,!1);d&&q(d);const Je=x(o.renderAspect,"portrait");ae(Je);const Ye=x(o.renderCaptionWidth,90);re(Ye);const ve=x(o.renderMusicPath,"");ve&&F(ve);const He=x(o.renderMusicVolume,.3);ie(He);const Ge=x(o.renderAutoDuck,!0);le(Ge);const Ke=x(o.renderDurationSec,20);oe(Ke)},[]),t.useEffect(()=>{f(o.audioPath,w)},[w]),t.useEffect(()=>{f(o.renderLines,b)},[b]),t.useEffect(()=>{f(o.renderBackgroundPath,k)},[k]),t.useEffect(()=>{f(o.renderInBackground,u)},[u]),t.useEffect(()=>{f(o.renderAspect,v)},[v]),t.useEffect(()=>{f(o.renderCaptionWidth,N)},[N]),t.useEffect(()=>{f(o.renderMusicPath,M)},[M]),t.useEffect(()=>{f(o.renderMusicVolume,S)},[S]),t.useEffect(()=>{f(o.renderAutoDuck,L)},[L]),t.useEffect(()=>{f(o.renderDurationSec,C)},[C]);const y=C>60;t.useEffect(()=>{y&&!u&&q(!0)},[y,u]);const J=s=>[s.hook,`${s.verse} (${s.reference})`,s.reflection,s.cta].filter(Boolean).join(`
`),be=async s=>{if(!k&&!p){c.error("Background is required");return}const a=b.split(`
`).map(i=>i.trim()).filter(Boolean).slice(0,6);if(a.length===0){c.error("Overlay text lines are required (max 6)");return}if(s==="waveform"&&!w.trim()){c.error("Audio Path is required for waveform mode");return}K(!0);try{const i=u?"/api/jobs/enqueue":`/api/render/${s}`,l=u?{type:s==="video"?"render_video":"render_waveform",payload:{backgroundPath:p?.id||k,audioPath:w,lines:a,durationSec:C,aspect:v,captionWidthPct:N,musicPath:M||void 0,musicVolume:S,autoDuck:L}}:{backgroundPath:p?.id||k,audioPath:w,lines:a,durationSec:C,aspect:v,captionWidthPct:N,musicPath:M||void 0,musicVolume:S,autoDuck:L},r=await m.post(i,l);r.ok?u?c.success("Job enqueued successfully!"):(c.success("Video rendered successfully!"),we(r.data)):c.error(r.error||"Rendering failed")}catch{c.error("An error occurred")}finally{K(!1)}},We=async()=>{E(!0),Z(!0);try{const s=await m.get("/api/library");s.ok&&s.data?.library?.items&&Se(s.data.library.items)}catch{c.error("Failed to load library")}finally{Z(!1)}},Oe=async()=>{A(!0),ee(!0);try{const s=await m.get("/api/media/audio-list");s.ok&&s.data?.items?Me(s.data.items):c.error(s.error||"Failed to load music library")}catch{c.error("Failed to load music library")}finally{ee(!1)}},$e=s=>{F(s.path||""),A(!1),c.success("Soundtrack selected")},qe=s=>{se(s),O(s.id),E(!1),c.success("Background selected")},Fe=async()=>{const s=await m.get("/api/social/config");s.ok&&s.data&&(Te(s.data.webhooks||[]),de(s.data.webhooks?.[0]?.id||""),Ue(s.data.buffer?.profileIds||[]),he(s.data.buffer?.profileIds?.[0]||""))};t.useEffect(()=>{Fe()},[]);const ge=async()=>{const s=[],a=new Set,i=await m.get("/api/jobs");i.ok&&i.data?.jobs&&i.data.jobs.filter(r=>r.status==="done"&&r.type==="render_video"&&r.result?.outFile).map(r=>({id:r.id,label:`${r.id.slice(0,8)} • ${new Date(r.createdAt).toLocaleString()}`,path:r.result.outFile})).forEach(r=>{const d=String(r.path||"");!d||a.has(d)||(a.add(d),s.push(r))});const l=await m.get("/api/media/video-list");l.ok&&l.data?.items&&l.data.items.forEach(r=>{const d=String(r?.path||"").trim();!d||a.has(d)||(a.add(d),s.push({id:`media_${r?.name||d}`,label:`media • ${r?.name||d.split(/[\\/]/).pop()}`,path:d}))}),De(s),!z&&!h?.file&&s.length>0&&T(s[0].path)};t.useEffect(()=>{ge()},[]),t.useEffect(()=>{h?.file&&T(h.file)},[h?.file]);const _e=async()=>{const s=z||h?.file,a=s?D(s,m.baseUrl):"";if(!a){c.error("Render a video first");return}const i=b.split(`
`).filter(Boolean).join(" ");if(!i){c.error("Caption is empty");return}const l={destination:g,caption:i,videoUrl:a};g==="webhook"&&(l.webhookId=ne),g==="buffer"&&(l.profileIds=[ue]),g==="youtube"&&(l.privacyStatus=ce);const r=await m.post("/api/social/post",l);r.ok?c.success("Share triggered"):c.error(r.error||"Share failed")};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("h2",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-primary-200",children:"Video Renderer"}),e.jsxs(P,{title:"Configuration",children:[!W&&e.jsx("div",{className:"mb-4 text-xs text-yellow-200 bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-3",children:"Rendering is disabled because FFmpeg was not detected on the server."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Background Asset"}),p?e.jsxs("div",{className:`relative bg-black rounded-xl overflow-hidden group ${v==="landscape"?"aspect-[16/9]":v==="square"?"aspect-square":"aspect-[9/16]"}`,children:[e.jsx("img",{src:me(p),className:"w-full h-full object-cover opacity-70 group-hover:opacity-100 transition-opacity",alt:"",loading:"lazy",onError:s=>fe(s,p)}),xe(p.previewUrl||p.url)&&e.jsx("video",{src:V(p.previewUrl||p.url),className:"absolute inset-0 w-full h-full object-cover opacity-0 group-hover:opacity-100 transition-opacity",muted:!0,loop:!0,playsInline:!0,autoPlay:!0,preload:"metadata",onError:s=>{s.currentTarget.style.display="none"}}),e.jsx("div",{className:"absolute inset-[8%] border border-white/40 border-dashed pointer-events-none rounded-md"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(n,{onClick:()=>se(null),variant:"secondary",className:"h-8 text-xs bg-red-500/10 text-red-400 border-red-500/20",children:"Change"})}),e.jsxs("div",{className:"absolute bottom-0 inset-x-0 p-2 bg-gradient-to-t from-black/80 text-[10px] text-white font-mono truncate",children:["ID: ",p.id]})]}):e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(U,{value:k,onChange:s=>O(s.target.value),placeholder:"Manual path (e.g. server/outputs/xyz.mp4)",className:"bg-black/20"}),e.jsxs(n,{onClick:We,variant:"secondary",className:"h-10 border-dashed border-white/10 text-xs",children:[e.jsx(Y,{size:14,className:"mr-2"}),"Select from Library"]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Output Frame"}),e.jsxs(j,{value:v,onChange:s=>ae(s.target.value),children:[e.jsx("option",{value:"portrait",children:"Portrait (9:16)"}),e.jsx("option",{value:"landscape",children:"Landscape (16:9)"}),e.jsx("option",{value:"square",children:"Square (1:1)"})]}),e.jsx("p",{className:"text-[10px] text-gray-500 mt-1 uppercase tracking-tighter",children:"Text auto-wrap adjusts to the selected frame"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Duration"}),e.jsxs(j,{value:String(C),onChange:s=>oe(Number(s.target.value)),children:[e.jsx("option",{value:"20",children:"20s (default)"}),e.jsx("option",{value:"60",children:"60s"}),e.jsx("option",{value:"120",children:"120s"}),e.jsx("option",{value:"180",children:"180s"})]}),y&&e.jsx("div",{className:"mt-2 text-[10px] uppercase tracking-widest text-yellow-300 bg-yellow-500/10 border border-yellow-500/20 rounded-md px-2 py-1 inline-block",children:"Long render queued only"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:["Caption Width (",N,"%)"]}),e.jsx("input",{type:"range",min:"60",max:"100",step:"2",value:N,onChange:s=>re(Number(s.target.value)),className:"w-full accent-primary-500"}),e.jsx("p",{className:"text-[10px] text-gray-500 mt-1 uppercase tracking-tighter",children:"Lower value = more padding and tighter line wrapping"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Audio Source (required for waveform)"}),e.jsx(U,{value:w,onChange:s=>$(s.target.value),placeholder:"e.g. server/outputs/tts-xyz.mp3",className:"bg-black/20"}),te.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:te.slice(0,4).map(s=>e.jsx("button",{onClick:()=>$(s.path),className:"text-[10px] px-2 py-1 rounded-full bg-white/10 text-gray-200 hover:bg-white/20",children:s.kind},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Soundtrack (optional)"}),e.jsx(U,{value:M,onChange:s=>F(s.target.value),placeholder:"e.g. server/outputs/music.mp3",className:"bg-black/20"}),e.jsxs(n,{onClick:Oe,variant:"secondary",className:"mt-2 h-9 text-xs border-dashed border-white/10",children:[e.jsx(Y,{size:14,className:"mr-2"}),"Select from Music Library"]}),e.jsxs("label",{className:"block text-xs text-gray-500 mt-2",children:["Music Volume (",S,")"]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:S,onChange:s=>ie(Number(s.target.value)),className:"w-full accent-primary-500"}),e.jsxs("label",{className:"mt-3 flex items-center gap-2 text-xs text-gray-400",children:[e.jsx("input",{type:"checkbox",checked:L,onChange:s=>le(s.target.checked),className:"rounded border-white/10 bg-black/50 checked:bg-primary-500"}),"Auto-duck music under voice"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Overlay Text (max 6 lines)"}),e.jsx(Xe,{value:b,onChange:s=>I(s.target.value),placeholder:"Enter your script lines here...",className:"bg-black/20 h-32"}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsxs(n,{variant:"secondary",className:"h-8 text-xs",onClick:()=>B(!0),children:[e.jsx(ye,{size:14,className:"mr-2"}),"Pick From Scripts"]}),R.length>0&&e.jsx(n,{variant:"secondary",className:"h-8 text-xs",onClick:()=>I(J(R[0])),children:"Use Latest Script"})]}),e.jsx("p",{className:"text-[10px] text-gray-500 mt-1 uppercase tracking-tighter",children:"One line per caption slide (auto-sliced)"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"background",checked:u,onChange:s=>q(s.target.checked),className:"rounded border-white/10 bg-black/50 checked:bg-primary-500",disabled:y}),e.jsx("label",{htmlFor:"background",className:"text-sm text-gray-400",children:"Render in background (Jobs System)"}),y&&e.jsx("span",{className:"text-[10px] text-yellow-300",children:"Required for 60s+"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs(n,{onClick:()=>be("video"),isLoading:G,className:"w-full h-12 text-md",disabled:!W||y&&!u,children:[e.jsx(Ze,{size:18,className:"mr-2"}),u?"Queue Video Render":"Start Instant Render"]}),e.jsxs(n,{onClick:()=>be("waveform"),isLoading:G,variant:"secondary",className:"w-full h-12 text-md",disabled:!W||y&&!u,children:[e.jsx(ts,{size:18,className:"mr-2"}),u?"Queue Waveform Render":"Render Waveform MP4"]})]})]})]}),h&&e.jsx(P,{title:"Render Result",className:"border-green-500/20 bg-green-500/5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-black/40 rounded-lg font-mono text-xs text-green-400 break-all",children:h.file||JSON.stringify(h)}),e.jsxs(n,{onClick:()=>{const s=D(h.file,m.baseUrl);window.open(s,"_blank")},variant:"secondary",className:"w-full",children:[e.jsx(es,{size:16,className:"mr-2"}),"Open Video"]})]})}),b&&e.jsx(P,{title:"Share Kit",className:"border-white/10 bg-white/[0.03]",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Copy your caption and upload the rendered file to TikTok/IG/YouTube Shorts."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] uppercase tracking-widest text-gray-500 mb-1",children:"Video to Share"}),e.jsxs(j,{value:z,onChange:s=>T(s.target.value),children:[h?.file&&e.jsx("option",{value:h.file,children:"Latest Instant Render"}),_.length>0&&e.jsx("optgroup",{label:"Completed Jobs",children:_.map(s=>e.jsx("option",{value:s.path,children:s.label},s.id))}),!h?.file&&_.length===0&&e.jsx("option",{value:"",children:"No rendered videos found"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] uppercase tracking-widest text-gray-500 mb-1",children:"Or Paste Video Path"}),e.jsx(U,{value:z,onChange:s=>T(s.target.value),placeholder:"outputs/video-xyz.mp4",className:"bg-black/20"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsx(n,{variant:"secondary",className:"text-xs h-8",onClick:ge,children:"Refresh Rendered Videos"})}),e.jsx("div",{className:"bg-black/30 border border-white/10 rounded-lg p-3 text-xs text-gray-200 whitespace-pre-wrap",children:b.split(`
`).filter(Boolean).join(" ")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsx(n,{variant:"secondary",className:"text-xs h-8 w-full sm:w-auto",onClick:()=>{navigator.clipboard.writeText(b.split(`
`).filter(Boolean).join(" ")),c.success("Caption copied")},children:"Copy Caption"})}),e.jsxs("div",{className:"pt-2 border-t border-white/10 space-y-2",children:[e.jsx("div",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:"Auto Post"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[e.jsxs(j,{value:g,onChange:s=>Be(s.target.value),children:[e.jsx("option",{value:"webhook",children:"Webhook (Zapier/Make)"}),e.jsx("option",{value:"buffer",children:"Buffer (Legacy)"}),e.jsx("option",{value:"youtube",children:"YouTube (Direct)"}),e.jsx("option",{value:"instagram",children:"Instagram (Direct)"}),e.jsx("option",{value:"tiktok",children:"TikTok (Direct)"})]}),g==="webhook"?e.jsxs(j,{value:ne,onChange:s=>de(s.target.value),children:[e.jsx("option",{value:"",children:"Select webhook..."}),ze.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}):g==="buffer"?e.jsxs(j,{value:ue,onChange:s=>he(s.target.value),children:[e.jsx("option",{value:"",children:"Select profile..."}),Ve.map(s=>e.jsx("option",{value:s,children:s},s))]}):g==="youtube"?e.jsxs(j,{value:ce,onChange:s=>Re(s.target.value),children:[e.jsx("option",{value:"private",children:"YouTube Private"}),e.jsx("option",{value:"unlisted",children:"YouTube Unlisted"}),e.jsx("option",{value:"public",children:"YouTube Public"})]}):e.jsx("div",{className:"text-[10px] text-yellow-300 bg-yellow-500/10 border border-yellow-500/20 rounded-md px-2 py-1",children:"Direct API requires OAuth setup"}),e.jsx(n,{onClick:_e,className:"text-xs h-8",children:"Share Now"})]})]})]})}),Ne&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>E(!1)}),e.jsxs(P,{className:"relative w-full max-w-4xl max-h-[80vh] overflow-hidden flex flex-col border-white/20 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[e.jsx("h3",{className:"font-bold text-lg text-white",children:"Select Background"}),e.jsx("button",{onClick:()=>E(!1),className:"text-gray-500 hover:text-white",children:e.jsx(H,{size:24})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:Ce?e.jsx("div",{className:"col-span-full py-20 flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-primary-500"})}):Q.length>0?Q.map(s=>e.jsxs("div",{className:"group relative aspect-[9/16] bg-black rounded-xl overflow-hidden cursor-pointer hover:ring-2 hover:ring-primary-500 transition-all shadow-lg",onClick:()=>qe(s),children:[e.jsx("img",{src:me(s),className:"w-full h-full object-cover opacity-70 group-hover:opacity-100 transition-opacity",alt:"",loading:"lazy",onError:a=>fe(a,s)}),xe(s.previewUrl||s.url)&&e.jsx("video",{src:V(s.previewUrl||s.url),className:"absolute inset-0 w-full h-full object-cover opacity-0 group-hover:opacity-100 transition-opacity",muted:!0,loop:!0,playsInline:!0,autoPlay:!0,preload:"metadata",onError:a=>{a.currentTarget.style.display="none"}}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 p-2 bg-gradient-to-t from-black/80 to-transparent",children:e.jsxs("p",{className:"text-[10px] font-mono text-white truncate",children:["ID: ",s.id]})})]},s.id)):e.jsxs("div",{className:"col-span-full py-20 text-center opacity-30 text-white",children:[e.jsx(Y,{size:48,className:"mx-auto mb-4"}),e.jsx("p",{children:"Your library is empty."})]})})]})]}),Ie&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>B(!1)}),e.jsxs(P,{className:"relative w-full max-w-4xl max-h-[80vh] overflow-hidden flex flex-col border-white/20 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[e.jsx("h3",{className:"font-bold text-lg text-white",children:"Scripts Library"}),e.jsx("button",{onClick:()=>B(!1),className:"text-gray-500 hover:text-white",children:e.jsx(H,{size:24})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:R.length===0?e.jsxs("div",{className:"text-center opacity-50 text-white py-12",children:[e.jsx(ye,{size:48,className:"mx-auto mb-4"}),e.jsx("p",{children:"No scripts found. Generate scripts first."})]}):R.map((s,a)=>e.jsxs("div",{className:"border border-white/10 rounded-xl p-4 hover:border-primary-500/40 transition",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-semibold text-white text-sm",children:[a+1,". ",s.title]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{variant:"secondary",className:"text-xs h-8",onClick:()=>{const i=J(s);I(i),B(!1),c.success("Script loaded into overlay")},children:"Use"}),e.jsx(n,{variant:"secondary",className:"text-xs h-8",onClick:()=>{const i=J(s);navigator.clipboard.writeText(i),c.success("Copied to clipboard")},children:"Copy"})]})]}),e.jsxs("div",{className:"text-xs text-gray-300 space-y-1",children:[e.jsx("p",{children:s.hook}),e.jsxs("p",{children:[s.verse," (",s.reference,")"]}),e.jsx("p",{children:s.reflection}),e.jsx("p",{children:s.cta})]})]},`${s.title}-${a}`))})]})]}),Pe&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>A(!1)}),e.jsxs(P,{className:"relative w-full max-w-3xl max-h-[80vh] overflow-hidden flex flex-col border-white/20 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[e.jsx("h3",{className:"font-bold text-lg text-white",children:"Music Library"}),e.jsx("button",{onClick:()=>A(!1),className:"text-gray-500 hover:text-white",children:e.jsx(H,{size:24})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:Le?e.jsx("div",{className:"py-20 flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-primary-500"})}):X.length>0?X.map(s=>e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-3 flex flex-col md:flex-row md:items-center gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider",children:s.name||"Audio"}),e.jsx("p",{className:"text-xs font-mono text-white/80 truncate",children:s.path})]}),e.jsx("audio",{controls:!0,src:D(s.path,m.baseUrl),className:"w-full md:w-56"}),e.jsx(n,{onClick:()=>$e(s),className:"text-xs h-8",variant:"secondary",children:"Use"})]},s.path||s.name)):e.jsx("div",{className:"py-20 text-center text-gray-400 text-sm",children:"No audio files found in outputs."})})]})]})]})}export{xs as RenderPage};
