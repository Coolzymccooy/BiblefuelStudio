import{c as I,f as M,r as o,j as e,B as c,b as f,z as u}from"./index-BPh36Un5.js";import{C as v}from"./Card-DdOFDQ-A.js";import{B as j}from"./Badge-Bg1ujSGz.js";import{I as n}from"./Input-DO4DbE3r.js";import{S as y}from"./Select-DS6Bnjpw.js";import{R as q}from"./refresh-cw-CUbzmV1A.js";const L=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],O=I("key",L);const U=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],N=I("link-2",U);const W=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Y=I("triangle-alert",W);function X(){const{config:A}=M(),{features:x}=A,[h,g]=o.useState("api"),[m,B]=o.useState(""),[C,R]=o.useState([]),[S,T]=o.useState([]),[l,p]=o.useState([]),[P,w]=o.useState(""),[a,d]=o.useState({youtubeClientId:"",youtubeClientSecret:"",youtubeRefreshToken:"",instagramAccessToken:"",instagramUserId:"",tiktokAccessToken:"",tiktokOpenId:""}),_=o.useMemo(()=>[{name:"OPENAI_API_KEY",label:"OpenAI API Key",desc:"Required for Scripts",enabled:x.scripts},{name:"GEMINI_API_KEY",label:"Gemini API Key",desc:"Alternative for Scripts",enabled:x.scripts},{name:"ELEVENLABS_API_KEY",label:"ElevenLabs API Key",desc:"Required for TTS Voice",enabled:x.tts},{name:"PEXELS_API_KEY",label:"Pexels API Key",desc:"Required for Background Videos",enabled:x.pexels},{name:"PIXABAY_API_KEY",label:"Pixabay API Key",desc:"Required for Animated Backgrounds",enabled:x.pixabay},{name:"FFMPEG_PATH",label:"FFmpeg",desc:"Required for Render + Audio Processing",enabled:x.render}],[x]),E=async()=>{const s=await f.get("/api/social/config");if(s.ok&&s.data){T(s.data.buffer?.profileIds||[]);const t=(s.data.webhooks||[]).map(k=>({...k}));p(t);const i=t.find(k=>k.enabled),r=i?.id||i?.url||t[0]?.id||t[0]?.url||"";w(r),s.data.direct&&d({youtubeClientId:s.data.direct.youtube?.clientId||"",youtubeClientSecret:s.data.direct.youtube?.clientSecret||"",youtubeRefreshToken:s.data.direct.youtube?.refreshToken||"",instagramAccessToken:s.data.direct.instagram?.accessToken||"",instagramUserId:s.data.direct.instagram?.userId||"",tiktokAccessToken:s.data.direct.tiktok?.accessToken||"",tiktokOpenId:s.data.direct.tiktok?.openId||""})}};o.useEffect(()=>{E()},[]);const b=async()=>{const s=await f.post("/api/social/config",{buffer:{accessToken:m||void 0,profileIds:S},webhooks:l,direct:{youtube:{clientId:a.youtubeClientId,clientSecret:a.youtubeClientSecret,refreshToken:a.youtubeRefreshToken},instagram:{accessToken:a.instagramAccessToken,userId:a.instagramUserId},tiktok:{accessToken:a.tiktokAccessToken,openId:a.tiktokOpenId}}});s.ok?(u.success("Social config saved"),await E()):u.error(s.error||"Failed to save social config")},K=async()=>{if(!m){u.error("Add Buffer access token first");return}const s=await f.post("/api/social/buffer/profiles",{accessToken:m});s.ok&&s.data?.profiles?(R(s.data.profiles),u.success("Buffer profiles loaded")):u.error(s.error||"Failed to load profiles")},z=async()=>{const s=l.find((i,r)=>(i.id||i.url||String(r))===P);if(!s?.url){u.error("Select a webhook first");return}const t=await f.post("/api/social/post",{destination:"webhook",webhookId:s.id,webhookUrl:s.url,caption:"Test post from Biblefuel Studio",videoUrl:"https://example.com/test-video.mp4",meta:{event:"test.webhook",source:"settings"}});t.ok?u.success("Test webhook sent"):u.error(t.error||"Failed to send test webhook")};return e.jsxs("div",{className:"max-w-5xl mx-auto space-y-6 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400 mb-2",children:"Settings"}),e.jsx("p",{className:"text-gray-400",children:"Manage keys, social automation, and app info."})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(c,{variant:h==="api"?"primary":"secondary",className:"text-xs h-8",onClick:()=>g("api"),children:"API Keys"}),e.jsx(c,{variant:h==="social"?"primary":"secondary",className:"text-xs h-8",onClick:()=>g("social"),children:"Social Automation"}),e.jsx(c,{variant:h==="app"?"primary":"secondary",className:"text-xs h-8",onClick:()=>g("app"),children:"App Info"})]}),h==="api"&&e.jsx(v,{title:"API Configuration",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3 flex items-start gap-3",children:[e.jsx(Y,{className:"text-blue-400 shrink-0 mt-1",size:18}),e.jsxs("div",{className:"text-xs text-blue-200",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Environment Variables"}),e.jsxs("p",{children:["Set keys in ",e.jsx("code",{className:"bg-black/30 px-1.5 py-0.5 rounded text-blue-300",children:"server/.env"})," and restart."]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:_.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-xl border border-white/5 hover:border-white/10 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-dark-900 rounded-lg text-gray-400",children:e.jsx(O,{size:16})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-200 text-sm",children:s.label}),e.jsx("p",{className:"text-[10px] text-gray-500",children:s.desc})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"hidden sm:block text-[10px] text-gray-600 bg-black/20 px-2 py-1 rounded",children:s.name}),e.jsx(j,{variant:s.enabled?"success":"warning",children:s.enabled?"Ready":"Missing"})]})]},s.name))})]})}),h==="social"&&e.jsx(v,{title:"Social Automation",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Use Buffer or webhooks for the fastest setup. Direct APIs require OAuth apps and approvals."}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-gray-300",children:[e.jsx(N,{size:14})," Buffer (Legacy API)"]}),e.jsx(n,{value:m,onChange:s=>B(s.target.value),placeholder:"Buffer access token"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(c,{variant:"secondary",className:"text-xs h-8",onClick:K,children:[e.jsx(q,{size:14,className:"mr-2"}),"Load Profiles"]}),e.jsx(c,{variant:"secondary",className:"text-xs h-8",onClick:b,children:"Save Config"})]}),C.length>0&&e.jsxs(y,{value:S[0]||"",onChange:s=>T([s.target.value]),children:[e.jsx("option",{value:"",children:"Select profile..."}),C.map(s=>e.jsxs("option",{value:s.id,children:[s.formatted_service," (",s.id,")"]},s.id))]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-gray-300",children:[e.jsx(N,{size:14})," Webhooks (Zapier/Make)"]}),e.jsxs(y,{value:P,onChange:s=>w(s.target.value),children:[e.jsx("option",{value:"",children:"Select webhook to test..."}),l.map((s,t)=>e.jsxs("option",{value:s.id||s.url||String(t),children:[s.name||`Webhook ${t+1}`,s.enabled?"":" (disabled)"]},s.id||s.url||t))]}),l.map((s,t)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[e.jsx(n,{value:s.name,onChange:i=>{const r=[...l];r[t]={...r[t],name:i.target.value},p(r)},placeholder:"Webhook name"}),e.jsx(n,{value:s.url,onChange:i=>{const r=[...l];r[t]={...r[t],url:i.target.value},p(r)},placeholder:"https://hooks.zapier.com/..."}),e.jsxs(y,{value:s.enabled?"true":"false",onChange:i=>{const r=[...l];r[t]={...r[t],enabled:i.target.value==="true"},p(r)},children:[e.jsx("option",{value:"true",children:"Enabled"}),e.jsx("option",{value:"false",children:"Disabled"})]})]},s.id||t)),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(c,{variant:"secondary",className:"text-xs h-8",onClick:()=>p([...l,{name:"Zapier",url:"",enabled:!0}]),children:"Add Webhook"}),e.jsx(c,{variant:"secondary",className:"text-xs h-8",onClick:z,children:"Send Test Webhook"}),e.jsx(c,{variant:"secondary",className:"text-xs h-8",onClick:b,children:"Save Config"})]})]})]}),e.jsxs("div",{className:"pt-2 border-t border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-gray-300 mb-2",children:[e.jsx(N,{size:14})," Direct APIs (Beta)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[e.jsx(n,{value:a.youtubeClientId,onChange:s=>d({...a,youtubeClientId:s.target.value}),placeholder:"YouTube Client ID"}),e.jsx(n,{value:a.youtubeClientSecret,onChange:s=>d({...a,youtubeClientSecret:s.target.value}),placeholder:"YouTube Client Secret"}),e.jsx(n,{value:a.youtubeRefreshToken,onChange:s=>d({...a,youtubeRefreshToken:s.target.value}),placeholder:"YouTube Refresh Token"}),e.jsx(n,{value:a.instagramAccessToken,onChange:s=>d({...a,instagramAccessToken:s.target.value}),placeholder:"Instagram Access Token"}),e.jsx(n,{value:a.instagramUserId,onChange:s=>d({...a,instagramUserId:s.target.value}),placeholder:"Instagram User ID"}),e.jsx(n,{value:a.tiktokAccessToken,onChange:s=>d({...a,tiktokAccessToken:s.target.value}),placeholder:"TikTok Access Token"}),e.jsx(n,{value:a.tiktokOpenId,onChange:s=>d({...a,tiktokOpenId:s.target.value}),placeholder:"TikTok Open ID"})]}),e.jsx("div",{className:"flex gap-2 mt-2",children:e.jsx(c,{variant:"secondary",className:"text-xs h-8",onClick:b,children:"Save Direct Config"})})]})]})}),h==="app"&&e.jsx(v,{title:"Application Info",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-white/5",children:[e.jsx("span",{className:"text-gray-400",children:"Version"}),e.jsx("span",{className:"font-mono text-sm",children:"v3.0.0 (React Refactor)"})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-white/5",children:[e.jsx("span",{className:"text-gray-400",children:"Environment"}),e.jsx(j,{variant:"success",children:A.env})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-white/5",children:[e.jsx("span",{className:"text-gray-400",children:"Backend Status"}),e.jsx(j,{variant:"success",children:"Connected"})]})]})})]})}export{X as SettingsPage};
